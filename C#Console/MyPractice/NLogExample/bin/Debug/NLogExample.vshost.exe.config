<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog" />
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="data source=localhost;initial catalog=ContactBook;integrated security=True;MultipleActiveResultSets=True;Provider=sqlclient;" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5.2" />
  </startup>
  <nlog>
    <targets>
      <target name="database" type="Database" keepConnection="true" useTransactions="true"
             dbProvider="System.Data.SqlClient"
             connectionString="data source=localhost;initial catalog=ContactBook;integrated security=true;persist security info=True;" commandText="insert into CB_Log(Logger, LoggerLevel, CallSite, Message, TimeStamp) values(@LOGGER,@LOGLEVEL,@CALLSITE,@MESSAGE,@TIME_STAMP)">
        <parameter name="@LOGGER" layout="${logger}" />
        <parameter name="@LOGLEVEL" layout="${level:uppercase=true}" />
        <parameter name="@CALLSITE" layout="${callsite:filename=true}" />
        <parameter name="@MESSAGE" layout="${message}" />
        <parameter name="@TIME_STAMP" layout="${longdate}" />
      </target>
    </targets>
    <rules>
      <logger name="*" levels="Info,Debug,Warn,Error" appendTo="database"></logger>
    </rules>
  </nlog>
</configuration>